<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<body>
    <div th:fragment="header">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/play">Play</a></li>
            <li><a href="/user">Profile</a></li>
            <li style="float:right"><a class="active" href="/login">Login</a></li>
        </ul>
        <style>
            ul {
                list-style-type: none;
                margin: 0;
                padding: 0;
                overflow: hidden;
                background-color: #333;
            }

            li {
                float: left;
            }

            li a {
                display: block;
                color: white;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
            }

            li a:hover:not(.active) {
                background-color: #111;
            }

            .active {
                background-color: #04AA6D;
                cursor: pointer;
            }
        </style>
        <script  th:inline="javascript">
            const loginUUID = '[[${loginUUID}]]';
            if (loginUUID !== 'null') {
                $('.active').text('logout');
                $('.active').removeAttr('href');
                $('.active').click(e => {
                    fetch('/api/logout', {
                        method: 'DELETE',
                        cache: 'no-cache',
                        credentials: 'same-origin',
                    }).then(response => {
                        //sessionStorage.removeItem('loginUUID');
                        $('.active').text('login');
                        $('.active').attr('href', '/login');
                        $('.active').unbind();
                        window.location.reload();
                    }).catch(err => {
                        alert(err);
                    })

                });
            }
        </script>
        
    </div>

</body>

</html>